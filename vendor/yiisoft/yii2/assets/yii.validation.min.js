yii.validation=(function(c){var b={isEmpty:function(e){return e===null||e===undefined||e==[]||e===""},addMessage:function(f,e,g){f.push(e.replace(/\{value\}/g,g))},required:function(i,h,f){var g=false;if(f.requiredValue===undefined){var e=typeof i=="string"||i instanceof String;if(f.strict&&i!==undefined||!f.strict&&!b.isEmpty(e?c.trim(i):i)){g=true}}else{if(!f.strict&&i==f.requiredValue||f.strict&&i===f.requiredValue){g=true}}if(!g){b.addMessage(h,f.message,i)}},"boolean":function(h,g,e){if(e.skipOnEmpty&&b.isEmpty(h)){return}var f=!e.strict&&(h==e.trueValue||h==e.falseValue)||e.strict&&(h===e.trueValue||h===e.falseValue);if(!f){b.addMessage(g,e.message,h)}},string:function(g,f,e){if(e.skipOnEmpty&&b.isEmpty(g)){return}if(typeof g!=="string"){b.addMessage(f,e.message,g);return}if(e.min!==undefined&&g.length<e.min){b.addMessage(f,e.tooShort,g)}if(e.max!==undefined&&g.length>e.max){b.addMessage(f,e.tooLong,g)}if(e.is!==undefined&&g.length!=e.is){b.addMessage(f,e.notEqual,g)}},file:function(h,g,e){var f=d(h,g,e);c.each(f,function(k,j){a(j,g,e)})},image:function(i,h,f,e){var g=d(i,h,f);c.each(g,function(m,l){a(l,h,f);if(typeof FileReader==="undefined"){return}var n=c.Deferred(),j=new FileReader(),k=new Image();k.onload=function(){if(f.minWidth&&this.width<f.minWidth){h.push(f.underWidth.replace(/\{file\}/g,l.name))}if(f.maxWidth&&this.width>f.maxWidth){h.push(f.overWidth.replace(/\{file\}/g,l.name))}if(f.minHeight&&this.height<f.minHeight){h.push(f.underHeight.replace(/\{file\}/g,l.name))}if(f.maxHeight&&this.height>f.maxHeight){h.push(f.overHeight.replace(/\{file\}/g,l.name))}n.resolve()};k.onerror=function(){h.push(f.notImage.replace(/\{file\}/g,l.name));n.resolve()};j.onload=function(){k.src=j.result};j.onerror=function(){n.resolve()};j.readAsDataURL(l);e.push(n)})},number:function(g,f,e){if(e.skipOnEmpty&&b.isEmpty(g)){return}if(typeof g==="string"&&!g.match(e.pattern)){b.addMessage(f,e.message,g);return}if(e.min!==undefined&&g<e.min){b.addMessage(f,e.tooSmall,g)}if(e.max!==undefined&&g>e.max){b.addMessage(f,e.tooBig,g)}},range:function(h,g,e){if(e.skipOnEmpty&&b.isEmpty(h)){return}if(!e.allowArray&&c.isArray(h)){b.addMessage(g,e.message,h);return}var f=true;c.each(c.isArray(h)?h:[h],function(k,j){if(c.inArray(j,e.range)==-1){f=false;return false}else{return true}});if(e.not===f){b.addMessage(g,e.message,h)}},regularExpression:function(g,f,e){if(e.skipOnEmpty&&b.isEmpty(g)){return}if(!e.not&&!g.match(e.pattern)||e.not&&g.match(e.pattern)){b.addMessage(f,e.message,g)}},email:function(j,g,e){if(e.skipOnEmpty&&b.isEmpty(j)){return}var f=true;var i=/^((?:"?([^"]*)"?\s)?)(?:\s+)?(?:(<?)((.+)@([^>]+))(>?))$/,h=i.exec(j);if(h===null){f=false}else{if(e.enableIDN){h[5]=punycode.toASCII(h[5]);h[6]=punycode.toASCII(h[6]);j=h[1]+h[3]+h[5]+"@"+h[6]+h[7]}if(h[5].length>64){f=false}else{if((h[5]+"@"+h[6]).length>254){f=false}else{f=j.match(e.pattern)||(e.allowName&&j.match(e.fullPattern))}}}if(!f){b.addMessage(g,e.message,j)}},url:function(j,g,e){if(e.skipOnEmpty&&b.isEmpty(j)){return}if(e.defaultScheme&&!j.match(/:\/\//)){j=e.defaultScheme+"://"+j}var f=true;if(e.enableIDN){var i=/^([^:]+):\/\/([^\/]+)(.*)$/,h=i.exec(j);if(h===null){f=false}else{j=h[1]+"://"+punycode.toASCII(h[2])+h[3]}}if(!f||!j.match(e.pattern)){b.addMessage(g,e.message,j)}},trim:function(e,g,f){var i=e.find(g.input);var h=i.val();if(!f.skipOnEmpty||!b.isEmpty(h)){h=c.trim(h);i.val(h)}return h},captcha:function(l,k,f){if(f.skipOnEmpty&&b.isEmpty(l)){return}var m=c("body").data(f.hashKey);if(m==null){m=f.hash}else{m=m[f.caseSensitive?0:1]}var e=f.caseSensitive?l:l.toLowerCase();for(var g=e.length-1,j=0;g>=0;--g){j+=e.charCodeAt(g)}if(j!=m){b.addMessage(k,f.message,l)}},compare:function(i,h,f){if(f.skipOnEmpty&&b.isEmpty(i)){return}var e,g=true;if(f.compareAttribute===undefined){e=f.compareValue}else{e=c("#"+f.compareAttribute).val()}if(f.type==="number"){i=parseFloat(i);e=parseFloat(e)}switch(f.operator){case"==":g=i==e;break;case"===":g=i===e;break;case"!=":g=i!=e;break;case"!==":g=i!==e;break;case">":g=i>e;break;case">=":g=i>=e;break;case"<":g=i<e;break;case"<=":g=i<=e;break;default:g=false;break}if(!g){b.addMessage(h,f.message,i)}},ip:function(k,i,g){var f=function(l){return l.indexOf(":")===-1?4:6};var e=null,h=null;if(g.skipOnEmpty&&b.isEmpty(k)){return}var j=new RegExp(g.ipParsePattern).exec(k);if(j){e=j[1]||null;k=j[2];h=j[4]||null}if(g.subnet===true&&h===null){b.addMessage(i,g.messages.noSubnet,k);return}if(g.subnet===false&&h!==null){b.addMessage(i,g.messages.hasSubnet,k);return}if(g.negation===false&&e!==null){b.addMessage(i,g.messages.message,k);return}if(f(k)==6){if(!g.ipv6){b.addMessage(i,g.messages.ipv6NotAllowed,k)}if(!(new RegExp(g.ipv6Pattern)).test(k)){b.addMessage(i,g.messages.message,k)}}else{if(!g.ipv4){b.addMessage(i,g.messages.ipv4NotAllowed,k)}if(!(new RegExp(g.ipv4Pattern)).test(k)){b.addMessage(i,g.messages.message,k)}}}};function d(h,g,e){if(typeof File==="undefined"){return[]}var f=c(h.input).get(0).files;if(!f){g.push(e.message);return[]}if(f.length===0){if(!e.skipOnEmpty){g.push(e.uploadRequired)}return[]}if(e.maxFiles&&e.maxFiles<f.length){g.push(e.tooMany);return[]}return f}function a(g,i,f){if(f.extensions&&f.extensions.length>0){var e,h;e=g.name.lastIndexOf(".");if(!~e){h=""}else{h=g.name.substr(e+1,g.name.length).toLowerCase()}if(!~f.extensions.indexOf(h)){i.push(f.wrongExtension.replace(/\{file\}/g,g.name))}}if(f.mimeTypes&&f.mimeTypes.length>0){if(!~f.mimeTypes.indexOf(g.type)){i.push(f.wrongMimeType.replace(/\{file\}/g,g.name))}}if(f.maxSize&&f.maxSize<g.size){i.push(f.tooBig.replace(/\{file\}/g,g.name))}if(f.minSize&&f.minSize>g.size){i.push(f.tooSmall.replace(/\{file\}/g,g.name))}}return b})(jQuery);