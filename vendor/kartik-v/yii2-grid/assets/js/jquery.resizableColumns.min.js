var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__slice=[].slice;(function(e,b){var a,f,d,c;f=function(g){return parseFloat(g.style.width.replace("%",""))};c=function(h,g){g=g.toFixed(2);g=g>0?g:0;return h.style.width=""+g+"%"};d=function(g){if(g.type.indexOf("touch")===0){return(g.originalEvent.touches[0]||g.originalEvent.changedTouches[0]).pageX}return g.pageX};a=(function(){g.prototype.defaults={selector:"tr th:visible",store:b.store,syncHandlers:true,resizeFromBody:true,maxWidth:null,minWidth:null};function g(i,h){this.pointerdown=__bind(this.pointerdown,this);this.constrainWidth=__bind(this.constrainWidth,this);this.options=e.extend({},this.defaults,h);this.$table=i;this.setHeaders();this.restoreColumnWidths();this.syncHandleWidths();e(b).on("resize.rc",((function(j){return function(){return j.syncHandleWidths()}})(this)));if(this.options.start){this.$table.bind("column:resize:start.rc",this.options.start)}if(this.options.resize){this.$table.bind("column:resize.rc",this.options.resize)}if(this.options.stop){this.$table.bind("column:resize:stop.rc",this.options.stop)}}g.prototype.triggerEvent=function(j,h,i){var k;k=e.Event(j);k.originalEvent=e.extend({},i);return this.$table.trigger(k,[this].concat(h||[]))};g.prototype.getColumnId=function(h){return this.$table.data("resizable-columns-id")+"-"+h.data("resizable-column-id")};g.prototype.setHeaders=function(){this.$tableHeaders=this.$table.find(this.options.selector);this.assignPercentageWidths();return this.createHandles()};g.prototype.destroy=function(){this.$handleContainer.remove();this.$table.removeData("resizableColumns");return this.$table.add(b).off(".rc")};g.prototype.assignPercentageWidths=function(){return this.$tableHeaders.each((function(h){return function(i,k){var j;j=e(k);return c(j[0],j.outerWidth()/h.$table.width()*100)}})(this))};g.prototype.createHandles=function(){var h;if((h=this.$handleContainer)!=null){h.remove()}this.$table.before((this.$handleContainer=e("<div class='rc-handle-container' />")));this.$tableHeaders.each((function(i){return function(j,k){var l;if(i.$tableHeaders.eq(j+1).length===0||(i.$tableHeaders.eq(j).attr("data-noresize")!=null)||(i.$tableHeaders.eq(j+1).attr("data-noresize")!=null)){return}l=e("<div class='rc-handle' />");l.data("th",e(k));return l.appendTo(i.$handleContainer)}})(this));return this.$handleContainer.on("mousedown touchstart",".rc-handle",this.pointerdown)};g.prototype.syncHandleWidths=function(){return this.$handleContainer.width(this.$table.width()).find(".rc-handle").each((function(h){return function(i,k){var j;j=e(k);return j.css({left:j.data("th").outerWidth()+(j.data("th").offset().left-h.$handleContainer.offset().left),height:h.options.resizeFromBody?h.$table.height():h.$table.find("thead").height()})}})(this))};g.prototype.saveColumnWidths=function(){return this.$tableHeaders.each((function(h){return function(i,k){var j;j=e(k);if(j.attr("data-noresize")==null){if(h.options.store!=null){return h.options.store.set(h.getColumnId(j),f(j[0]))}}}})(this))};g.prototype.restoreColumnWidths=function(){return this.$tableHeaders.each((function(h){return function(i,l){var j,k;j=e(l);if((h.options.store!=null)&&(k=h.options.store.get(h.getColumnId(j)))){return c(j[0],k)}}})(this))};g.prototype.totalColumnWidths=function(){var h;h=0;this.$tableHeaders.each((function(i){return function(j,k){return h+=parseFloat(e(k)[0].style.width.replace("%",""))}})(this));return h};g.prototype.constrainWidth=function(h){if(this.options.minWidth!=null){h=Math.max(this.options.minWidth,h)}if(this.options.maxWidth!=null){h=Math.min(this.options.maxWidth,h)}return h};g.prototype.pointerdown=function(n){var k,h,m,o,l,i,j;n.preventDefault();m=e(n.currentTarget.ownerDocument);i=d(n);k=e(n.currentTarget);h=k.data("th");o=this.$tableHeaders.eq(this.$tableHeaders.index(h)+1);j={left:f(h[0]),right:f(o[0])};l={left:j.left,right:j.right};this.$handleContainer.add(this.$table).addClass("rc-table-resizing");h.add(o).add(k).addClass("rc-column-resizing");this.triggerEvent("column:resize:start",[h,o,l.left,l.right],n);m.on("mousemove.rc touchmove.rc",(function(p){return function(q){var r;r=(d(q)-i)/p.$table.width()*100;c(h[0],l.left=p.constrainWidth(j.left+r));c(o[0],l.right=p.constrainWidth(j.right-r));if(p.options.syncHandlers!=null){p.syncHandleWidths()}return p.triggerEvent("column:resize",[h,o,l.left,l.right],q)}})(this));return m.one("mouseup touchend",(function(p){return function(){m.off("mousemove.rc touchmove.rc");p.$handleContainer.add(p.$table).removeClass("rc-table-resizing");h.add(o).add(k).removeClass("rc-column-resizing");p.syncHandleWidths();p.saveColumnWidths();return p.triggerEvent("column:resize:stop",[h,o,l.left,l.right],n)}})(this))};return g})();return e.fn.extend({resizableColumns:function(){var g,h;h=arguments[0],g=2<=arguments.length?__slice.call(arguments,1):[];return this.each(function(){var i,j;i=e(this);j=i.data("resizableColumns");if(!j){i.data("resizableColumns",(j=new a(i,h)))}if(typeof h==="string"){return j[h].apply(j,g)}})}})})(window.jQuery,window);