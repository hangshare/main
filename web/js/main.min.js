$(function () {
    function t() {
        var t, o, i = window.location;
        "replaceState" in history ? history.replaceState("", document.title, i.pathname + i.search) : (t = document.body.scrollTop, o = document.body.scrollLeft, i.hash = "", document.body.scrollTop = t, document.body.scrollLeft = o)
    }

    function o() {
        var t = Math.random();
        return Math.floor(1e5 * t + 200)
    }

    function i() {
        var t = window.location.href;
        return t += -1 === t.indexOf("?") ? "?" : "&", t += "page=" + inifi_page, inifi_called || (inifi_called = !0, $(".inifi").append(htmlloading), $.ajax({
            url: t,
            type: "GET",
            dataType: "JSON",
            success: function (t) {
                inifi_total = Math.ceil(t.total / t.PageSize), $("#loadingi").fadeOut(), $(".inifi").append(t.html), $("#loadingi").remove(), inifi_called = !1, inifi_page++
            }
        })), !1
    }

    ("#_=_" == location.hash || "#_=_" == location.href.slice(-1)) && t(), $('[data-toggle="tooltip"]').tooltip();
    var e = $("#w0").offset().top, n = $(".stiky"), s = $("#1a");
    if (s.length > 0)var s = $("#1a").offset().top;
    $(window).scroll(function () {
        $(window).scrollTop() > e + 150 ? $(".scroll-header").fadeIn() : $(".scroll-header").fadeOut(), s.length > 0 && (n.length > 0 && $(window).scrollTop() > s + 92 ? n.attr({style: "position:fixed;top:40px;"}) : n.length > 0 && $(window).scrollTop() < s + 85 && n.attr({style: "position:absolute;top:auto;"}))
    }), $.isFunction($.fn.editable) && $(".froala-edit").editable({
        inlineMode: !1,
        toolbarFixed: !0,
        mediaManager: !1,
        language: "ar",
        direction: "rtl",
        imageUploadURL: "/explore/upload",
        minHeight: 200,
        maxHeight: 800
    }), input = document.getElementById("post-cover_file"), input && (input.onchange = function () {
        if (textinpt = document.getElementById("uploadFile"), textinpt && (textinpt.value = this.value), input.files && input.files[0]) {
            var t = new FileReader;
            t.onload = function (t) {
                $("#coveri").attr("src", t.target.result)
            }, t.readAsDataURL(input.files[0])
        }
    }), input = document.getElementById("goldtime"), input && (input.onchange = function () {
        "b" === this.value ? ($("#planb").show(), $("#planc").hide()) : "c" === this.value && ($("#planb").hide(), $("#planc").show())
    }), fixad = $("#fixad, .fixad"), fixad.length > 0 && $(window).scroll(function () {
        value = fixad.attr("rel"), $(window).scrollTop() + $(window).height() > value ? fixad.css({
            position: "fixed",
            top: "0"
        }) : fixad.css({position: "inherit", top: "0"})
    });
    var a = $("#faqsearch");
    if (a.length > 0 && $.getScript("https://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.js", function () {
            a.ajaxForm({
                beforeSend: function () {
                }, success: function (t) {
                    $("#content").html($(t).find("#content"))
                }, complete: function (t) {
                }
            })
        }), $(document).on("click", "#js_edpix", function (t) {
            t.preventDefault(), $("#post-cover_file").click()
        }), $.getScript("https://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.js", function () {
            $("#ProfileImage").ajaxForm({
                beforeSend: function () {
                }, success: function (t) {
                    var o = JSON.parse(t);
                    $("#coveri").attr({src: o.url}), $("#user-image").val(o.name)
                }, complete: function (t) {
                }
            })
        }), $(document).on("change", "#post-cover_file", function (t) {
            t.preventDefault(), $("#ProfileImage").submit()
        }), $(document).on("submit", "#add-post", function (t) {
            $(".has-error").length > 0 || ($(this).prop("disabled", !0), $("body").append("<div class='black_overlay'></div><div class='white_content'>الرجاء الإنتظار</div>"))
        }), $(document).on("click", ".js_passch", function (t) {
            t.preventDefault();
            var o = $("#user-password_old").val(), i = $("#user-password_new").val(), e = $("#user-password_re").val();
            return e !== i ? void alert("تأكيد كلمة السر غير مطابق لكلمة السر.") : void $.ajax({
                url: "changepass",
                method: "POST",
                dataType: "json",
                data: {password: i, old: o},
                success: function (t) {
                    t.status === !1 ? alert("كلمة السر الحالية غير صحيحة.") : (alert("تم تغيير كلمة المرور بنجاح."), $(".modal").modal("hide"))
                }
            })
        }), $(document).on("click", ".js-share", function (t) {
            t.preventDefault();
            var o = document.title, i = document.URL, e = $(this).attr("post-url");
            e.length && (i = e), $(this).hasClass("js-share-twitter") ? popup_url = "http://twitter.com/intent/tweet?text=" + o + " @hangshare " + i : $(this).hasClass("js-share-fasebook") ? popup_url = "https://www.facebook.com/sharer/sharer.php?u=" + i : $(this).hasClass("js-share-gpuls") && (popup_url = 'https://plus.google.com/share?url="' + i + '"');
            var n = window.open(popup_url, "popupwindow", "scrollbars=yes,width=600,height=400");
            n.focus()
        }), $("#sharenew").modal("show"), $(document).on("click", ".showclick", function (t) {
            t.preventDefault(), console.log("asd");
            var o = $(this).attr("id");
            $("[id$='_form']").hide(), $(".showclick").removeClass("btn-warning"), $(".showclick").addClass("btn-default"), $(this).removeClass("btn-warning"), $(this).addClass("btn-warning"), $("#" + o + "_form").show()
        }), $("article").length > 0) {
        var l = $("article").data();
        $.ajax({method: "POST", url: "countcheck?qt=" + o(), data: l})
    }
    if ($("#related-posts").length > 0) {
        var l = $("article").data();
        $.ajax({
            method: "POST", url: "related?qt=" + o(), data: l, success: function (t, o, i) {
                $("#related-posts").append(t)
            }
        })
    }
    inifi = $(".inifi"), inifi.length && (inifi_page = 2, inifi_total = 2, inifi_called = !1, htmlloading = '<div id="loadingi"><i style="display: block;font-size: 66px;left: 47%;margin: 0 auto 50px;position: relative;text-align: center;top: 18px;" class="fa fa-spinner fa-pulse"></i></div>', $(window).scroll(function () {
        if ($(window).scrollTop() + $(window).height() > $(document).height() - 200) {
            if (inifi_page > inifi_total)return !1;
            i()
        }
    }));
    var r = {
        setting: {startline: 100, scrollto: 0, scrollduration: 1e3, fadeduration: [500, 100]},
        controlHTML: '<i class="fa fa-chevron-up backtotop"></i>',
        controlattrs: {offsetx: 5, offsety: 5},
        anchorkeyword: "#top",
        state: {isvisible: !1, shouldvisible: !1},
        scrollup: function () {
            this.cssfixedsupport || this.$control.css({opacity: 0});
            var t = isNaN(this.setting.scrollto) ? this.setting.scrollto : parseInt(this.setting.scrollto);
            t = "string" == typeof t && 1 == jQuery("#" + t).length ? jQuery("#" + t).offset().top : 0, this.$body.animate({scrollTop: t}, this.setting.scrollduration)
        },
        keepfixed: function () {
            var t = jQuery(window), o = t.scrollLeft() + t.width() - this.$control.width() - this.controlattrs.offsetx, i = t.scrollTop() + t.height() - this.$control.height() - this.controlattrs.offsety;
            this.$control.css({left: o + "px", top: i + "px"})
        },
        togglecontrol: function () {
            var t = jQuery(window).scrollTop();
            this.cssfixedsupport || this.keepfixed(), this.state.shouldvisible = t >= this.setting.startline ? !0 : !1, this.state.shouldvisible && !this.state.isvisible ? (this.$control.stop().animate({opacity: 1}, this.setting.fadeduration[0]), this.state.isvisible = !0) : 0 == this.state.shouldvisible && this.state.isvisible && (this.$control.stop().animate({opacity: 0}, this.setting.fadeduration[1]), this.state.isvisible = !1)
        },
        init: function () {
            jQuery(document).ready(function (t) {
                var o = r, i = document.all;
                o.cssfixedsupport = !i || i && "CSS1Compat" == document.compatMode && window.XMLHttpRequest, o.$body = t(window.opera ? "CSS1Compat" == document.compatMode ? "html" : "body" : "html,body"), o.$control = t('<div id="topcontrol">' + o.controlHTML + "</div>").css({
                    position: o.cssfixedsupport ? "fixed" : "absolute",
                    bottom: o.controlattrs.offsety,
                    right: o.controlattrs.offsetx,
                    opacity: 0,
                    cursor: "pointer"
                }).attr({title: "Scroll Back to Top"}).click(function () {
                    return o.scrollup(), !1
                }).appendTo("body"), document.all && !window.XMLHttpRequest && "" != o.$control.text() && o.$control.css({width: o.$control.width()}), o.togglecontrol(), t('a[href="' + o.anchorkeyword + '"]').click(function () {
                    return o.scrollup(), !1
                }), t(window).bind("scroll resize", function (t) {
                    o.togglecontrol()
                })
            })
        }
    };
    r.init()
});