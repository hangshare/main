$(function(){if((location.hash=="#_=_"||location.href.slice(-1)=="#_=_")){h()}$('[data-toggle="tooltip"]').tooltip();function h(){var n,o,p=window.location;if("replaceState" in history){history.replaceState("",document.title,p.pathname+p.search)}else{n=document.body.scrollTop;o=document.body.scrollLeft;p.hash="";document.body.scrollTop=n;document.body.scrollLeft=o}}var e=$("#w0").offset().top;var b=$(".stiky");var d=$("#1a");if(d.length>0){var d=$("#1a").offset().top}$(window).scroll(function(){if($(window).scrollTop()>e+150){$(".scroll-header").fadeIn()}else{$(".scroll-header").fadeOut()}if(d.length>0){if(b.length>0&&$(window).scrollTop()>d+92){b.attr({style:"position:fixed;top:40px;"})}else{if(b.length>0&&$(window).scrollTop()<d+85){b.attr({style:"position:absolute;top:auto;"})}}}});if($.isFunction($.fn.editable)){$(".froala-edit").editable({inlineMode:false,toolbarFixed:true,mediaManager:false,language:"ar",direction:"rtl",imageUploadURL:"/explore/upload/",minHeight:200,maxHeight:800})}input=document.getElementById("post-cover_file");if(input){input.onchange=function(){textinpt=document.getElementById("uploadFile");if(textinpt){textinpt.value=this.value}if(input.files&&input.files[0]){var n=new FileReader();n.onload=function(o){$("#coveri").attr("src",o.target.result)};n.readAsDataURL(input.files[0])}}}input=document.getElementById("goldtime");if(input){input.onchange=function(){if(this.value==="b"){$("#planb").show();$("#planc").hide()}else{if(this.value==="c"){$("#planb").hide();$("#planc").show()}}}}fixad=$("#fixad, .fixad");if(fixad.length>0){$(window).scroll(function(){value=fixad.attr("rel");if($(window).scrollTop()+$(window).height()>value){fixad.css({position:"fixed",top:"0"})}else{fixad.css({position:"inherit",top:"0"})}})}var c=$("#faqsearch");if(c.length>0){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.js",function(){c.ajaxForm({beforeSend:function(){},success:function(n){$("#content").html($(n).find("#content"))},complete:function(n){}})})}var i=$("#uploadform");if(i.length>0){$(document).on("click","#uploadtos3",function(n){n.preventDefault();$("#files3").click()});var a;$.ajax({url:"/explore/s3crd/",type:"POST",dataType:"JSON",data:{},success:function(n){a=n}});function l(){var p="";var n="1234ABCDEFGHIJKLMNOPQRSTUVWXY567890Zabcdefghijklmnopqrstuvwxyz0123456789-";for(var o=0;o<6;o++){p+=n.charAt(Math.floor(Math.random()*n.length))}return p}var k=window.URL;$("#files3").change(function(){var p,o,r,q;if(p=this.files[0]){o=new Image();o.onload=function(){r=this.width;q=this.height};o.src=k.createObjectURL(p);folderName=l();formData=new FormData();formData.append("key",folderName+"/"+p.name);formData.append("acl",a.inputs.acl);formData.append("success_action_status",a.inputs.success_action_status);formData.append("Content-Type",p.type);formData.append("policy",a.inputs.policy);formData.append("X-amz-credential",a.inputs.X_amz_credential);formData.append("X-amz-algorithm",a.inputs.X_amz_algorithm);formData.append("X-amz-date",a.inputs.X_amz_date);formData.append("X-amz-expires",a.inputs.X_amz_expires);formData.append("X-amz-signature",a.inputs.X_amz_signature);formData.append("file",p);$.ajax({url:a.url,type:"POST",data:formData,crossDomain:true,contentType:false,processData:false,dataType:"XML",success:function(u,t,v){var w=v.responseXML.getElementsByTagName("PostResponse")[0].childNodes[1].firstChild.nodeValue;var s=v.responseXML.getElementsByTagName("PostResponse")[0].childNodes[2].firstChild.nodeValue;if(t==="success"){$.ajax({url:"/explore/resize/",method:"POST",dataType:"json",data:{bucket:w,key:s},success:function(x){$("#cover_input").val('{"bucket":'+w+', "key":'+s+"}")}})}}});var n=new FileReader();n.onload=function(s){$("#coveri").attr("src",s.target.result)};n.readAsDataURL(this.files[0])}})}if($("#user-country").length){rel_c=$("#user-country").attr("rel");if(rel_c==="autoload"){$.ajax({url:"/user/getcountry/",method:"POST",dataType:"json",success:function(n){$("#user-country").val(n.id)}})}}$(document).on("click","#js_edpix",function(n){n.preventDefault();$("#post-cover_file").click()});$.getScript("https://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.js",function(){$("#ProfileImage").ajaxForm({beforeSend:function(){},success:function(n){var o=JSON.parse(n);$("#coveri").attr({src:o.url});$("#user-image").val(o.name)},complete:function(n){}})});$(document).on("change","#post-cover_file",function(n){n.preventDefault();$("#ProfileImage").submit()});$(document).on("submit","#add-post",function(n){if($(".has-error").length>0){}else{$(this).prop("disabled",true);$("body").append("<div class='black_overlay'></div><div class='white_content'>الرجاء الإنتظار</div>")}});$(document).on("click",".js_passch",function(q){q.preventDefault();var n=$("#user-password_old").val();var p=$("#user-password_new").val();var o=$("#user-password_re").val();if(o!==p){alert("تأكيد كلمة السر غير مطابق لكلمة السر.");return}$.ajax({url:"changepass",method:"POST",dataType:"json",data:{password:p,old:n},success:function(r){if(r.status===false){alert("كلمة السر الحالية غير صحيحة.")}else{alert("تم تغيير كلمة المرور بنجاح.");$(".modal").modal("hide")}}})});$(document).on("click",".js-share",function(q){q.preventDefault();var r=document.title;var p=document.URL;var n=$(this).attr("post-url");if(n.length){p=n}if($(this).hasClass("js-share-twitter")){popup_url="http://twitter.com/intent/tweet?text="+r+" @hangshare "+p}else{if($(this).hasClass("js-share-fasebook")){popup_url="https://www.facebook.com/sharer/sharer.php?u="+p}else{if($(this).hasClass("js-share-gpuls")){popup_url='https://plus.google.com/share?url="'+p+'"'}}}var o=window.open(popup_url,"popupwindow","scrollbars=yes,width=600,height=400");o.focus()});$("#sharenew").modal("show");function f(){var n=Math.random();return Math.floor((n*100000)+200)}$(document).on("click",".showclick",function(o){o.preventDefault();console.log("asd");var n=$(this).attr("id");$("[id$='_form']").hide();$(".showclick").removeClass("btn-warning");$(".showclick").addClass("btn-default");$(this).removeClass("btn-warning");$(this).addClass("btn-warning");$("#"+n+"_form").show()});if($("article").length>0){var m=$("article").data();$.ajax({method:"POST",url:"/explore/countcheck/?qt="+f(),data:m})}if($("#related-posts").length>0){var m=$("article").data();$.ajax({method:"POST",url:"/explore/related/?qt="+f(),data:m,success:function(o,p,n){$("#related-posts").append(o)}})}inifi=$(".inifi");if(inifi.length){inifi_page=2;inifi_total=2;inifi_called=false;htmlloading='<div id="loadingi"><i style="display: block;font-size: 66px;left: 47%;margin: 0 auto 50px;position: relative;text-align: center;top: 18px;" class="fa fa-spinner fa-pulse"></i></div>';$(window).scroll(function(){if($(window).scrollTop()+$(window).height()>$(document).height()-200){if(inifi_page>inifi_total){return false}else{j()}}})}function j(){var n=window.location.href;if(n.indexOf("?")===-1){n+="?"}else{n+="&"}n+="page="+inifi_page;if(!inifi_called){inifi_called=true;$(".inifi").append(htmlloading);$.ajax({url:n,type:"GET",dataType:"JSON",success:function(o){inifi_total=Math.ceil(o.total/o.PageSize);$("#loadingi").fadeOut();$(".inifi").append(o.html);$("#loadingi").remove();inifi_called=false;inifi_page++}})}return false}var g={setting:{startline:100,scrollto:0,scrollduration:1000,fadeduration:[500,100]},controlHTML:'<i class="fa fa-chevron-up backtotop"></i>',controlattrs:{offsetx:5,offsety:5},anchorkeyword:"#top",state:{isvisible:false,shouldvisible:false},scrollup:function(){if(!this.cssfixedsupport){this.$control.css({opacity:0})}var n=isNaN(this.setting.scrollto)?this.setting.scrollto:parseInt(this.setting.scrollto);if(typeof n=="string"&&jQuery("#"+n).length==1){n=jQuery("#"+n).offset().top}else{n=0}this.$body.animate({scrollTop:n},this.setting.scrollduration)},keepfixed:function(){var p=jQuery(window);var o=p.scrollLeft()+p.width()-this.$control.width()-this.controlattrs.offsetx;var n=p.scrollTop()+p.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:o+"px",top:n+"px"})},togglecontrol:function(){var n=jQuery(window).scrollTop();if(!this.cssfixedsupport){this.keepfixed()}this.state.shouldvisible=(n>=this.setting.startline)?true:false;if(this.state.shouldvisible&&!this.state.isvisible){this.$control.stop().animate({opacity:1},this.setting.fadeduration[0]);this.state.isvisible=true}else{if(this.state.shouldvisible==false&&this.state.isvisible){this.$control.stop().animate({opacity:0},this.setting.fadeduration[1]);this.state.isvisible=false}}},init:function(){jQuery(document).ready(function(p){var n=g;var o=document.all;n.cssfixedsupport=!o||o&&document.compatMode=="CSS1Compat"&&window.XMLHttpRequest;n.$body=(window.opera)?(document.compatMode=="CSS1Compat"?p("html"):p("body")):p("html,body");n.$control=p('<div id="topcontrol">'+n.controlHTML+"</div>").css({position:n.cssfixedsupport?"fixed":"absolute",bottom:n.controlattrs.offsety,right:n.controlattrs.offsetx,opacity:0,cursor:"pointer"}).attr({title:"Scroll Back to Top"}).click(function(){n.scrollup();return false}).appendTo("body");if(document.all&&!window.XMLHttpRequest&&n.$control.text()!=""){n.$control.css({width:n.$control.width()})}n.togglecontrol();p('a[href="'+n.anchorkeyword+'"]').click(function(){n.scrollup();return false});p(window).bind("scroll resize",function(q){n.togglecontrol()})})}};g.init()});