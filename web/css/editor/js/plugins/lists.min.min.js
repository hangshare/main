/*!
 * froala_editor v1.2.8 (https://www.froala.com/wysiwyg-editor)
 * License https://www.froala.com/wysiwyg-editor/terms
 * Copyright 2014-2015 Froala Labs
 */
!function(b){b.Editable.commands=b.extend(b.Editable.commands,{insertOrderedList:{title:"Numbered List",icon:"fa fa-list-ol",refresh:function(){},callback:function(c){this.formatList(c)},undo:!0},insertUnorderedList:{title:"Bulleted List",icon:"fa fa-list-ul",refresh:function(){},callback:function(c){this.formatList(c)},undo:!0}}),b.Editable.prototype.refreshLists=function(){var a=b(this.getSelectionElement()),f=this.parents(a,"ul, ol");if(f.length>0){var e="insertUnorderedList";"OL"==f[0].tagName&&(e="insertOrderedList"),this.$editor.find('button[data-cmd="'+e+'"]').addClass("active")}},b.Editable.prototype.processBackspace=function(a){var p=a.prev();if(p.length){for(this.removeMarkers(),("UL"==p.get(0).tagName||"OL"==p.get(0).tagName)&&(p=p.find("li:last"));p.find("> ul, > ol").length;){p=p.find("> ul li:last, > ol li:last")}var o=p.find("> p, > h1, > h3, > h4, > h5, > h6, > div, > pre, > blockquote");if(0===p.text().length&&0===p.find("img, table, input, iframe, video").length){p.remove()}else{if(this.emptyElement(p.get(0))||(this.keep_enter=!0,a.find("> p, > h1, > h3, > h4, > h5, > h6, > div, > pre, > blockquote").each(function(d,e){b(e).replaceWith(b(e).html())}),this.keep_enter=!1),o.length){if(b(o[o.length-1]).append(this.markers_html),0===a.find("ul, ol").length){b(o[o.length-1]).append(a.html())}else{for(var n=!1,m=a.contents(),l=0;l<m.length;l++){var k=m[l];["OL","UL"].indexOf(m[l].tagName)>=0&&(n=!0),n?b(o[o.length-1]).after(k):b(o[o.length-1]).append(k)}this.$element.find("breakli").remove();var j=o[o.length-1].nextSibling;j&&"BR"==j.tagName&&b(j).remove()}}else{this.emptyElement(p.get(0))?(this.$element.find("breakli").replaceWith(this.markers_html),p.html(a.html())):(p.append(this.markers_html),p.append(a.html()))}a.remove(),this.cleanupLists(),this.restoreSelectionByMarkers()}this.$element.find("breakli").remove()}else{this.$element.find("breakli").remove(),this.parents(a,"ul").length?this.formatList("insertUnorderedList",!1):this.formatList("insertOrderedList",!1)}this.sync()},b.Editable.prototype.liBackspace=function(){if(""!==this.text()){return !0}var r,q=this.getSelectionElement(),p=this.parents(b(q),"table, li");if(p.length>0&&"TABLE"===p[0].tagName){return !0}if(r="LI"==q.tagName?b(q):this.parents(b(q),"li:first"),this.removeMarkers(),this.emptyElement(r.get(0))?(r.prepend("<breakli></breakli>"),1==r.find("br").length&&r.find("br").remove()):this.insertHTML("<breakli></breakli>"),r.find("breakli").prev().length&&"TABLE"===r.find("breakli").prev().get(0).tagName&&r.find("breakli").next().length&&"BR"===r.find("breakli").next().get(0).tagName){return this.setSelection(r.find("breakli").prev().find("td:first").get(0)),r.find("breakli").next().remove(),this.$element.find("breakli").remove(),!1}for(var o,n=r.html(),m=[],l=0;l<n.length;l++){if(chr=n.charAt(l),"<"!=chr){return this.$element.find("breakli").remove(),!0}var k=n.indexOf(">",l+1);if(-1!==k){o=n.substring(l,k+1);var a=this.tagName(o);if(l=k,"breakli"==a){if(!this.isClosingTag(o)&&!this.isClosingTag(m[m.length-1])){return this.processBackspace(r),!1}}else{m.push(o)}}}return this.$element.find("breakli").remove(),!0},b.Editable.prototype.textLiEnter=function(J){this.removeMarkers(),this.insertSimpleHTML("<breakli></breakli>",!1);var I,H,G=J.html(),F=[],E={},D=[],C=0,B=J.prop("attributes"),A="";for(H=0;H<B.length;H++){A+=" "+B[H].name+'="'+B[H].value+'"'}var z=!1;for(H=0;H<G.length;H++){if(chr=G.charAt(H),"<"==chr){var y=G.indexOf(">",H+1);if(-1!==y){I=G.substring(H,y+1);var x=this.tagName(I);if(H=y,"breakli"==x){if(!this.isClosingTag(I)){for(var w=F.length-1;w>=0;w--){var v=this.tagName(F[w]);D.push("</"+v+">")}D.push("</li>"),D.push("<li"+A+">");for(var u=0;u<F.length;u++){D.push(F[u])}D.push('<span class="f-marker" data-type="false" data-collapsed="true" data-id="0" data-fr-verified="true"></span><span class="f-marker" data-type="true" data-collapsed="true" data-id="0" data-fr-verified="true"></span>'),z=!1}}else{if(D.push(I),z=!1,!this.isSelfClosingTag(I)){if(this.isClosingTag(I)){var t=E[x].pop();F.splice(t,1)}else{F.push(I),void 0===E[x]&&(E[x]=[]),E[x].push(F.length-1)}}}}}else{C++,32!=chr.charCodeAt(0)||z?(D.push(chr),z=!0):D.push("&nbsp;")}}var a=b(J.parents("ul, ol")[0]);J.replaceWith("<li"+A+">"+D.join("")+"</li>"),a.find("p:empty + table").prev().remove(),a.find("p + table").each(function(e,g){var f=b(g);f.prev().append(f.clone()),f.remove()}),a.find("table + p").each(function(e,g){var f=b(g);f.append(f.prev().clone()),f.prev().remove()}),this.keep_enter=!0,a.find(this.valid_nodes.join(",")).each(b.proxy(function(d,e){""===b(e).text().trim()&&0===b(e).find(this.valid_nodes.join(",")).length&&b(e).prepend(b.Editable.INVISIBLE_SPACE)},this)),this.keep_enter=!1},b.Editable.prototype.liEnter=function(){var a,f=this.getSelectionElement(),e=this.parents(b(f),"table, li");if(e.length>0&&"TABLE"==e[0].tagName){return !0}if(a="LI"==f.tagName?b(f):this.parents(b(f),"li:first"),this.getSelectionTextInfo(a.get(0)).atStart&&""===this.text()){a.before("<li>"+b.Editable.INVISIBLE_SPACE+"</li>")}else{if(0===this.trim(a.text()).length&&0===a.find("img, table, iframe, input, object").length){return this.outdent(!1),!1}this.textLiEnter(a),this.$element.find("breakli").remove(),this.restoreSelectionByMarkers()}return this.sync(),!1},b.Editable.prototype.listTab=function(){var a=b(this.getSelectionElement());return this.parents(a,"ul, ol").length>0&&0===this.parents(a,"table").length?(this.indent(),!1):void 0},b.Editable.prototype.listShiftTab=function(){var a=b(this.getSelectionElement());return this.parents(a,"ul, ol").length>0&&0===this.parents(a,"table").length?(this.outdent(),!1):void 0},b.Editable.prototype.indentList=function(d,c){return"LI"===d.get(0).tagName?(c?this.outdentLi(d):this.indentLi(d),this.cleanupLists(),!1):!0},b.Editable.prototype.initList=function(){this.addListener("tab",this.listTab),this.addListener("shift+tab",this.listShiftTab),this.addListener("refresh",this.refreshLists),this.addListener("indent",this.indentList),this.isImage||this.isLink||this.options.editInPopup||this.$element.on("keypress",b.proxy(function(a){if(["TEXTAREA","INPUT"].indexOf(a.target.tagName)<0&&!this.isHTML){var f=a.which,e=this.getSelectionElement();if("LI"==e.tagName||this.parents(b(e),"li").length>0){if(13==f&&!a.shiftKey&&this.options.multiLine){return this.liEnter()}if(8==f){return this.liBackspace()}}}},this))},b.Editable.initializers.push(b.Editable.prototype.initList),b.Editable.prototype.formatList=function(B,A){if(this.browser.msie&&b.Editable.getIEversion()<9){return document.execCommand(B,!1,!1),!1}void 0===A&&(A=!0);var z,y,x=!1,w=!0,v=!1,u=this.getSelectionElements(),t=this.parents(b(u[0]),"ul, ol");if(t.length&&("UL"===t[0].tagName?"insertUnorderedList"!=B&&(x=!0):"insertOrderedList"!=B&&(x=!0)),this.saveSelectionByMarkers(),x){z="ol","insertUnorderedList"===B&&(z="ul");var s=b(t[0]);s.replaceWith("<"+z+">"+s.html()+"</"+z+">")}else{for(var r=0;r<u.length;r++){if(y=b(u[r]),("TD"==y.get(0).tagName||"TH"==y.get(0).tagName)&&this.wrapTextInElement(y),this.parents(y,"li").length>0||"LI"==y.get(0).tagName){var q;q="LI"==y.get(0).tagName?y:b(y.parents("li")[0]);var p=this.parents(y,"ul, ol");if(p.length>0&&(z=p[0].tagName.toLowerCase(),q.before('<span class="close-'+z+'" data-fr-verified="true"></span>'),q.after('<span class="open-'+z+'" data-fr-verified="true"></span>')),0===this.parents(b(p[0]),"ol, ul").length||x){if(0===q.find(this.valid_nodes.join(",")).length){var a=q.html().replace(/\u200B/gi,"");this.options.paragraphy?(0===q.text().replace(/\u200B/gi,"").length&&(a+=q.find("br").length>0?"":this.br),a="<"+this.options.defaultTag+this.attrs(q.get(0))+">"+a,a=a+"</"+this.options.defaultTag+">"):a+=q.find("br").length>0?"":this.br,q.replaceWith(a)}else{q.replaceWith(q.html().replace(/\u200B/gi,""))}}else{this.parents(b(p[0]),"ol, ul").length>0&&(q.append('<span class="open-li" data-fr-verified="true"></span>'),q.before('<span class="close-li" data-fr-verified="true"></span>'))}v=!0}else{w=!1}}v&&this.cleanupLists(),(w===!1||x===!0)&&(this.wrapText(),this.restoreSelectionByMarkers(),u=this.getSelectionElements(),this.saveSelectionByMarkers(),this.elementsToList(u,B),this.unwrapText(),this.cleanupLists())}this.options.paragraphy&&!x&&this.wrapText(!0),this.restoreSelectionByMarkers(),A&&this.repositionEditor(),B="insertUnorderedList"==B?"unorderedListInserted":"orderedListInserted",this.triggerEvent(B)},b.Editable.prototype.elementsToList=function(a,j){var i="<ol>";"insertUnorderedList"==j&&(i="<ul>"),a[0]==this.$element.get(0)&&(a=this.$element.find("> "+this.valid_nodes.join(", >")));for(var h=0;h<a.length;h++){var g=b(i);$element=b(a[h]),$element.get(0)!=this.$element.get(0)&&("TD"===$element.get(0).tagName||"TH"===$element.get(0).tagName?(this.wrapTextInElement($element,!0),this.elementsToList($element.find("> "+this.valid_nodes.join(", >")),j)):(""===$element.attr("class")&&$element.removeAttr("class"),g.append($element.get(0).tagName==this.options.defaultTag&&0===$element.get(0).attributes.length?b("<li>").html($element.clone().html()):b("<li>").html($element.clone())),$element.replaceWith(g)))}},b.Editable.prototype.indentLi=function(a){var f=a.parents("ul, ol"),e=f.get(0).tagName.toLowerCase();a.find("> ul, > ol").length>0&&a.prev("li").length>0?(this.wrapTextInElement(a),a.find("> "+this.valid_nodes.join(" , > ")).each(function(d,g){b(g).wrap("<"+e+"></"+e+">").wrap("<li></li>")}),a.prev("li").append(a.find("> ul, > ol")),a.remove()):0===a.find("> ul, > ol").length&&a.prev("li").length>0&&(a.prev().append(b("<"+e+">").append(a.clone())),a.remove(),b(f.find("li").get().reverse()).each(function(g,i){var h=b(i);h.find(" > ul, > ol").length>0&&h.prev()&&h.prev().find(" > ul, > ol").length>0&&1===h.contents().length&&(h.prev().append(h.html()),h.remove())}))},b.Editable.prototype.outdentLi=function(a){var h=b(a.parents("ul, ol")[0]),g=this.parents(h,"ul, ol"),f=h.get(0).tagName.toLowerCase();0===a.prev("li").length&&this.parents(a,"li").length>0?(a.before('<span class="close-'+f+'" data-fr-verified="true"></span>'),a.before('<span class="close-li" data-fr-verified="true"></span>'),a.before('<span class="open-li" data-fr-verified="true"></span>'),a.after('<span class="open-'+f+'" data-fr-verified="true"></span>'),a.replaceWith(a.html())):(a.before('<span class="close-'+f+'" data-fr-verified="true"></span>'),a.after('<span class="open-'+f+'" data-fr-verified="true"></span>'),this.parents(a,"li").length>0&&(a.before('<span class="close-li" data-fr-verified="true"></span>'),a.after('<span class="open-li" data-fr-verified="true"></span>'))),g.length||(0===a.find(this.valid_nodes.join(",")).length?a.replaceWith(a.html().replace(/\u200b/gi,"")+this.br):(a.find(this.valid_nodes.join(", ")).each(b.proxy(function(d,e){this.emptyElement(e)&&b(e).append(this.br)},this)),a.replaceWith(a.html().replace(/\u200b/gi,""))))},b.Editable.prototype.listTextEmpty=function(a){var d=b(a).text().replace(/(\r\n|\n|\r|\t|\u200B)/gm,"");return(""===d||a===this.$element.get(0))&&1===b(a).find("br").length}}(jQuery);